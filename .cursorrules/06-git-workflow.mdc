---
alwaysApply: false
description: Git workflow, branch naming, and commit message standards
---

# Git Workflow & Version Control

## ğŸŒ¿ Branch Naming Convention (MANDATORY)

### Format

```
{type}/{description-in-english}
```

### Branch Types

| Type       | Purpose                      | Example                              |
| ---------- | ---------------------------- | ------------------------------------ |
| `feat`     | New feature development      | `feat/implement-google-login`        |
| `fix`      | Bug fixes                    | `fix/resolve-payment-error`          |
| `refactor` | Code refactoring             | `refactor/optimize-database-queries` |
| `docs`     | Documentation changes        | `docs/update-api-documentation`      |
| `test`     | Test additions/modifications | `test/add-user-service-tests`        |
| `chore`    | Maintenance tasks            | `chore/update-dependencies`          |
| `db`       | Database schema changes      | `db/add-user-profile-schema`         |
| `hotfix`   | Emergency production fixes   | `hotfix/fix-critical-payment-bug`    |

### Branch Naming Rules

1. âœ… **USE** lowercase only
2. âœ… **USE** hyphens to separate words
3. âœ… **USE** English for description
4. âœ… **BE** descriptive but concise
5. âŒ **DON'T** use special characters
6. âŒ **DON'T** use spaces
7. âŒ **DON'T** use Korean characters

### Examples

```bash
# âœ… CORRECT
feat/add-private-island-feature
fix/resolve-websocket-disconnect
refactor/extract-payment-handler
db/add-map-private-zone-table
test/add-e2e-island-tests

# âŒ WRONG
feature/add_private_island    # Wrong type, uses underscore
fix-payment                   # Missing type prefix
feat/í”„ë¼ì´ë¹—ì„¬ì¶”ê°€            # Korean characters
FEAT/Add-Island               # Uppercase letters
feat/add island feature       # Spaces instead of hyphens
```

## ğŸ“ Commit Message Convention (MANDATORY)

### Format

```
{TYPE}: {title in Korean}

{body in Korean (optional)}
{details (optional)}
```

### Commit Types

| Type       | Purpose          | When to Use                              |
| ---------- | ---------------- | ---------------------------------------- |
| `FEAT`     | New features     | Adding new functionality                 |
| `FIX`      | Bug fixes        | Fixing errors or issues                  |
| `DOCS`     | Documentation    | Updating README, comments, docs          |
| `STYLE`    | Code formatting  | Formatting, semicolons, whitespace       |
| `REFACTOR` | Code refactoring | Improving code without changing behavior |
| `TEST`     | Testing          | Adding or modifying tests                |
| `CHORE`    | Maintenance      | Dependencies, build config, etc.         |

### Commit Message Rules

1. âœ… **USE** UPPERCASE for type
2. âœ… **USE** Korean for title and body
3. âœ… **LIMIT** title to 50 characters
4. âœ… **EXPLAIN** what and why (not how)
5. âœ… **USE** imperative mood in title
6. âœ… **SEPARATE** title and body with blank line
7. âŒ **DON'T** end title with period
8. âŒ **DON'T** include issue numbers in title

### Examples

```bash
# âœ… CORRECT - Feature
FEAT: êµ¬ê¸€ ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€

- OAuth2 ì¸ì¦ í”Œë¡œìš° êµ¬í˜„
- ì‚¬ìš©ì ì •ë³´ ì €ì¥ ë¡œì§ ì¶”ê°€
- í”„ë¡ íŠ¸ì—”ë“œì™€ ì—°ë™ì„ ìœ„í•œ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„±

# âœ… CORRECT - Bug fix
FIX: ê²°ì œ ì™„ë£Œ í›„ ê³¨ë“œ ë¯¸ì§€ê¸‰ ë²„ê·¸ ìˆ˜ì •

ê²°ì œ ì™„ë£Œ ì›¹í›… ì²˜ë¦¬ ì¤‘ íŠ¸ëœì­ì…˜ ë¡¤ë°± ë¡œì§ì´ ì˜ëª»ë˜ì–´
ê³¨ë“œê°€ ì§€ê¸‰ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ í•´ê²°

# âœ… CORRECT - Refactor
REFACTOR: ì„¬ ìƒì„± ë¡œì§ì„ Factory íŒ¨í„´ìœ¼ë¡œ ê°œì„ 

- ì„¬ íƒ€ì…ë³„ ìƒì„± ë¡œì§ì„ ë³„ë„ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬
- í™•ì¥ì„±ê³¼ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± í–¥ìƒ
- ì¤‘ë³µ ì½”ë“œ ì œê±°

# âœ… CORRECT - Documentation
DOCS: API ë¬¸ì„œì— ì¸ì¦ íë¦„ ë‹¤ì´ì–´ê·¸ë¨ ì¶”ê°€

# âœ… CORRECT - Test
TEST: UserService ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€

changeNickname, changeTag ë©”ì„œë“œì— ëŒ€í•œ
ì •ìƒ ì¼€ì´ìŠ¤ ë° ì˜ˆì™¸ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì‘ì„±

# âŒ WRONG - Missing type
Add google login feature

# âŒ WRONG - English in body
FEAT: êµ¬ê¸€ ë¡œê·¸ì¸ ì¶”ê°€

Implement OAuth2 authentication flow

# âŒ WRONG - Too vague
FIX: ë²„ê·¸ ìˆ˜ì •

# âŒ WRONG - Period at end
FEAT: ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€.
```

## ğŸ”€ Git Workflow (MANDATORY)

### Feature Development Flow

```bash
# 1. Create feature branch from main
git checkout main
git pull origin main
git checkout -b feat/add-private-island

# 2. Make changes and commit
git add .
git commit -m "FEAT: í”„ë¼ì´ë¹— ì„¬ ê¸°ëŠ¥ ì¶”ê°€

- ì„¬ ìƒì„± API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- ì„¬ ì ‘ê·¼ ê¶Œí•œ ê²€ì¦ ë¡œì§ ì¶”ê°€
- E2E í…ŒìŠ¤íŠ¸ ì‘ì„±"

# 3. Keep branch up to date
git checkout main
git pull origin main
git checkout feat/add-private-island
git rebase main

# 4. Push to remote
git push origin feat/add-private-island

# 5. Create Pull Request
# (via GitHub/GitLab interface)

# 6. After PR approval and merge
git checkout main
git pull origin main
git branch -d feat/add-private-island
```

### Hotfix Flow

```bash
# 1. Create hotfix branch from main
git checkout main
git pull origin main
git checkout -b hotfix/fix-critical-payment-bug

# 2. Make fix and commit
git add .
git commit -m "FIX: ê²°ì œ ì¤‘ë³µ ì²˜ë¦¬ ë²„ê·¸ ê¸´ê¸‰ ìˆ˜ì •"

# 3. Push and create PR
git push origin hotfix/fix-critical-payment-bug

# 4. After urgent merge, update main
git checkout main
git pull origin main
```

## ğŸ“¦ Commit Best Practices

### Atomic Commits

```bash
# âœ… CORRECT - One logical change per commit
git commit -m "FEAT: ì‚¬ìš©ì ë‹‰ë„¤ì„ ë³€ê²½ ê¸°ëŠ¥ ì¶”ê°€"
git commit -m "TEST: ë‹‰ë„¤ì„ ë³€ê²½ í…ŒìŠ¤íŠ¸ ì¶”ê°€"
git commit -m "DOCS: ë‹‰ë„¤ì„ ë³€ê²½ API ë¬¸ì„œ ì—…ë°ì´íŠ¸"

# âŒ WRONG - Multiple unrelated changes
git commit -m "FEAT: ì—¬ëŸ¬ ê¸°ëŠ¥ ì¶”ê°€ ë° ë²„ê·¸ ìˆ˜ì •"
```

### When to Commit

1. âœ… After completing a logical unit of work
2. âœ… After all tests pass
3. âœ… Before switching context
4. âœ… At end of work session
5. âŒ NOT in the middle of refactoring
6. âŒ NOT with failing tests
7. âŒ NOT with commented-out code

### What to Commit

```bash
# âœ… INCLUDE
- Source code changes
- Test files
- Configuration changes
- Migration files
- Documentation updates

# âŒ EXCLUDE (should be in .gitignore)
- node_modules/
- dist/
- .env files
- IDE-specific files (.vscode/, .idea/)
- Log files (*.log)
- OS files (.DS_Store)
- Build artifacts
```

## ğŸ” Code Review Guidelines

### Before Creating PR

1. âœ… **RUN** all tests and ensure they pass
2. âœ… **FIX** all linter errors
3. âœ… **REVIEW** your own code first
4. âœ… **UPDATE** documentation if needed
5. âœ… **ENSURE** commit messages follow convention
6. âœ… **REBASE** on latest main branch
7. âŒ **DON'T** include unrelated changes

### PR Description Template

```markdown
## ê°œìš”

ì´ PRì€ í”„ë¼ì´ë¹— ì„¬ ê¸°ëŠ¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

## ë³€ê²½ ì‚¬í•­

- [ ] í”„ë¼ì´ë¹— ì„¬ ìƒì„± API êµ¬í˜„
- [ ] ì„¬ ì ‘ê·¼ ê¶Œí•œ ê²€ì¦ ë¡œì§
- [ ] E2E í…ŒìŠ¤íŠ¸ ì¶”ê°€
- [ ] Swagger ë¬¸ì„œ ì—…ë°ì´íŠ¸

## í…ŒìŠ¤íŠ¸ ë°©ë²•

1. ì„œë²„ ì‹¤í–‰: `npm run start:dev`
2. POST /api/islands/private ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
3. ê¶Œí•œ ì—†ëŠ” ì‚¬ìš©ìë¡œ ì ‘ê·¼ ì‹œ 403 í™•ì¸

## ê´€ë ¨ ì´ìŠˆ

Closes #123

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
- [x] Linter í†µê³¼
- [x] ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [x] Breaking changes ì—†ìŒ
```

### Reviewing PRs

#### As Reviewer

1. âœ… **CHECK** architecture compliance
2. âœ… **VERIFY** test coverage
3. âœ… **ENSURE** naming conventions followed
4. âœ… **LOOK** for potential bugs
5. âœ… **SUGGEST** improvements
6. âœ… **ASK** questions if unclear
7. âŒ **DON'T** approve without reviewing
8. âŒ **DON'T** nitpick trivial issues

#### Review Comments Format

```markdown
# âœ… CORRECT - Constructive

**Suggestion**: Consider extracting this logic into a separate Component for reusability.

**Question**: Why do we need to fetch all users here instead of paginating?

**Issue**: This will cause a race condition when multiple requests are made simultaneously.

# âŒ WRONG - Not helpful

This is bad.
Why did you do it this way?
Change this.
```

## ğŸš« Git Anti-Patterns (FORBIDDEN)

### âŒ NEVER commit directly to main

```bash
# âŒ WRONG
git checkout main
git commit -m "Quick fix"
git push origin main

# âœ… CORRECT
git checkout -b fix/quick-bug-fix
git commit -m "FIX: ë²„ê·¸ ìˆ˜ì •"
git push origin fix/quick-bug-fix
# Then create PR
```

### âŒ NEVER force push to main

```bash
# âŒ FORBIDDEN
git push --force origin main

# Even in feature branches, be careful
git push --force origin feat/my-feature  # Only if you're sure
```

### âŒ NEVER commit secrets

```bash
# âŒ WRONG - Secrets in code
const API_KEY = 'sk_live_123456789';
const DB_PASSWORD = 'mypassword';

# âœ… CORRECT - Use environment variables
const API_KEY = process.env.API_KEY;
const DB_PASSWORD = process.env.DB_PASSWORD;
```

### âŒ NEVER squash without understanding

```bash
# âŒ WRONG - Losing important commit history
git rebase -i HEAD~10
# Squashing all commits blindly

# âœ… CORRECT - Preserve meaningful commits
git rebase -i HEAD~10
# Keep logical commits, squash only fixups
```

### âŒ NEVER commit generated files

```bash
# âŒ WRONG
git add dist/
git add node_modules/
git add .env

# âœ… CORRECT - These should be in .gitignore
# Only commit source files
```

## ğŸ”§ Git Configuration

### Recommended Git Config

```bash
# User information
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# Default branch name
git config --global init.defaultBranch main

# Pull strategy
git config --global pull.rebase true

# Auto-correct typos
git config --global help.autocorrect 20

# Show short status
git config --global status.short true
```

## ğŸ“‹ .gitignore (MANDATORY)

```gitignore
# Dependencies
node_modules/
npm-debug.log*

# Build outputs
dist/
build/
*.tsbuildinfo

# Environment variables
.env
.env.local
.env.*.local

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Logs
logs/
*.log

# Test coverage
coverage/
.nyc_output/

# Temporary files
*.tmp
.cache/
```

## ğŸ¯ Summary - Critical Rules

1. âœ… **ALWAYS** use proper branch naming: `type/description-in-english`
2. âœ… **ALWAYS** write commit messages in Korean with UPPERCASE type
3. âœ… **ALWAYS** create feature branches from main
4. âœ… **ALWAYS** rebase before creating PR
5. âœ… **ALWAYS** run tests before committing
6. âœ… **ALWAYS** make atomic commits
7. âœ… **ALWAYS** review your own code first

8. âŒ **NEVER** commit directly to main
9. âŒ **NEVER** force push to main
10. âŒ **NEVER** commit secrets or credentials
11. âŒ **NEVER** commit generated files
12. âŒ **NEVER** commit without testing
13. âŒ **NEVER** use vague commit messages
14. âŒ **NEVER** skip code review
